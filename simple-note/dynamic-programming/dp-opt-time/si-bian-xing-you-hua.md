---
description: 施工中
---

# 四邊形優化

## 概述

四邊形優化是 DP 優化中一個相當難證明的一個章節，主要處理 1D/1D 跟 2D/1D 的某些型態的 DP。

其中關於 1D/1D 的 DP 會以決策單調性的角度來說明四邊形優化。

## 1D/1D DP 與 決策單調性

讓我們先來回顧一下前兩章。前兩章的內容是討論兩種不同 1D/1D DP 的一些特別情形的優化。這裡我們先放上那兩個優化的轉移式：

> 單調隊列優化：$$dp(i)=h(i)+\max\limits_{l(i)\leq j\leq r(i)}\{A(j)\}$$

> 斜率優化：$$dp(i)=h(i)+\max\limits_{j\leq r(i)}\{A(j)X(i)+B(j)\}$$\(這章節考慮$$A,B$$為遞增函數，也就是斜率、查詢都遞增\)

這兩種優化都是基於決策單調性來將複雜度優化到$$O(N)$$。那麼你可能會好奇，還有什麼情況是可以使用決策單調性的呢？接下來我們給出一個更推廣的原理：**四邊形不等式與決策單調性**

### 決策單調性適用原理：四邊形不等式與決策單調性

這裡先再次放上 1D/1D DP 的標準轉移式

$$dp(i)=\max(min)\{dp(j)+w(i,j)\}$$

**四邊形不等式：若**$$w(i,j)$$**滿足四邊形不等式，那麼對於任意**$$a\leq b\leq c\leq d$$，**皆有**$$w(a,c)+w(b,d)\leq (\geq)\ w(a,d)+w(b,c)$$

要注意的是，這裡的四邊形不等式並非代數上的不等式。他只是$$w$$這個函數所具備的特別性質。

那麼我們會有以下定理：

**定理：若**$$w(i,j)$$**滿足四邊形不等式，那麼這個 1D/1D DP 具有決策單調性**

不同的 min/max 跟大小於符號適用的 DP 跟單調性是有些許差別的，下面分出四種情形，這四種情形都具備決策單調性：

* 當四邊形不等式不等號為$$\leq$$時，若轉移方程取 min，那麼最優決策點的方向跟$$i$$移動的方向**相同**
* 當四邊形不等式不等號為$$\leq$$時，若轉移方程取 maxmin，那麼最優決策點的方向跟$$i$$移動的方向**相反**
* 當四邊形不等式不等號為$$\geq$$時，若轉移方程取 min，那麼最優決策點的方向跟$$i$$移動的方向**相反**
* 當四邊形不等式不等號為$$\geq$$時，若轉移方程取 min，那麼最優決策點的方向跟$$i$$移動的方向**相同**











